<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <title>Bugatti Chiron - 4K Experience</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            overflow: hidden;
            background: #000;
            /* GPU acceleration for entire page */
            transform: translateZ(0);
            -webkit-transform: translateZ(0);
        }

        .showcase {
            position: absolute;
            right: 0;
            width: 100%;
            min-height: 100vh;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #000;
            transition: 0.5s;
            z-index: 2;
            /* Hardware acceleration */
            will-change: transform;
            transform: translateZ(0);
        }

        .showcase header {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            padding: 40px 100px;
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .logo {
            text-transform: uppercase;
            cursor: pointer;
            color: #fff;
            font-weight: 700;
            font-size: 1.8em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }

        .toggle {
            position: relative;
            width: 60px;
            height: 60px;
            background: url(https://i.ibb.co/HrfVRcx/menu.png);
            background-repeat: no-repeat;
            background-size: 30px;
            background-position: center;
            cursor: pointer;
            filter: invert(1);
        }

        /* Optimized video container with multiple quality sources */
        .video-container {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            /* Critical GPU optimizations */
            transform: translateZ(0);
            -webkit-transform: translateZ(0);
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            perspective: 1000px;
            -webkit-perspective: 1000px;
        }

        .video {
            position: absolute;
            top: 50%;
            left: 50%;
            min-width: 100%;
            min-height: 100%;
            width: auto;
            height: auto;
            transform: translate(-50%, -50%);
            object-fit: cover;
            opacity: 1;
            /* Maximum hardware acceleration */
            will-change: transform, opacity;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            transform-style: preserve-3d;
            -webkit-transform-style: preserve-3d;
            /* Force GPU layer */
            filter: brightness(1);
            -webkit-filter: brightness(1);
        }

        /* Preload placeholder for instant display */
        .video-placeholder {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1080"><rect width="1920" height="1080" fill="%23000"/></svg>') center/cover;
            z-index: 1;
            transition: opacity 0.3s ease;
        }

        .video-placeholder.hidden {
            opacity: 0;
            pointer-events: none;
        }

        /* Progressive enhancement for different resolutions */
        @media (min-width: 3840px) and (min-height: 2160px) {
            .showcase {
                background-size: 3840px 2160px;
            }
        }

        @media (min-width: 2560px) and (min-height: 1440px) {
            .showcase {
                background-size: 2560px 1440px;
            }
        }

        .overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, 
                rgba(0,0,0,0.7) 0%, 
                rgba(0,0,0,0.5) 50%, 
                rgba(0,0,0,0.8) 100%);
            mix-blend-mode: multiply;
            z-index: 5;
            /* GPU acceleration */
            will-change: opacity;
            transform: translateZ(0);
        }

        .text {
            position: relative;
            z-index: 10;
            max-width: 600px;
            margin-left: 100px;
            color: #fff;
            /* GPU acceleration for text */
            will-change: transform;
            transform: translateZ(0);
        }

        .text h2 {
            font-size: 5em;
            font-weight: 800;
            color: #fff;
            line-height: 1em;
            text-transform: uppercase;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.7);
            margin-bottom: 10px;
        }

        .text h3 {
            font-size: 4em;
            font-weight: 700;
            color: #fff;
            line-height: 1em;
            text-transform: uppercase;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
            margin-bottom: 20px;
        }

        .text p {
            font-size: 1.1em;
            color: #fff;
            margin: 20px 0;
            font-weight: 400;
            max-width: 700px;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.7);
            line-height: 1.6;
        }

        .btn {
            display: inline-block;
            font-size: 1em;
            background: linear-gradient(45deg, #ff6b6b, #ee5a24);
            color: #fff;
            padding: 15px 30px;
            text-decoration: none;
            border-radius: 50px;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: all 0.3s ease;
            box-shadow: 0 8px 15px rgba(255, 107, 107, 0.3);
            font-weight: 600;
            will-change: transform;
        }

        .btn:hover {
            transform: translateY(-3px) translateZ(0);
            box-shadow: 0 15px 25px rgba(255, 107, 107, 0.4);
            background: linear-gradient(45deg, #ee5a24, #ff6b6b);
        }

        .social {
            position: absolute;
            z-index: 10;
            bottom: 20px;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 0 100px;
        }

        .social li {
            list-style: none;
            margin: 0 15px;
        }

        .social li a {
            display: inline-block;
            filter: invert(1);
            transform: scale(0.5);
            transition: 0.3s;
            will-change: transform;
        }

        .social li a:hover {
            transform: scale(0.6) translateY(-5px) translateZ(0);
        }

        /* Enhanced audio controls */
        .audio-controls {
            position: absolute;
            top: 50%;
            right: 50px;
            transform: translateY(-50%);
            z-index: 1000;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .audio-btn {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid rgba(255,255,255,0.8);
            background: rgba(0,0,0,0.8);
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            backdrop-filter: blur(15px);
            will-change: transform;
        }

        .audio-btn:hover {
            background: rgba(0,0,0,0.9);
            border-color: rgba(255,255,255,0.9);
            transform: scale(1.1) translateZ(0);
        }

        /* Performance optimizations */
        .showcase.active {
            right: 300px;
        }

        /* Loading with progress indicator */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }

        .loading.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 3px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
            margin-bottom: 20px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .loading-text {
            color: white;
            font-size: 1.2em;
            margin-top: 10px;
        }

        .progress-bar {
            width: 300px;
            height: 4px;
            background: rgba(255,255,255,0.2);
            border-radius: 2px;
            overflow: hidden;
            margin-top: 20px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ee5a24);
            width: 0%;
            transition: width 0.3s ease;
        }

        /* Video quality indicator with buffering status */
        .quality-indicator {
            position: absolute;
            top: 100px;
            right: 20px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            z-index: 1000;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255,255,255,0.3);
        }

        .buffering-indicator {
            position: absolute;
            top: 140px;
            right: 20px;
            background: rgba(0,100,0,0.8);
            color: white;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 11px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .buffering-indicator.visible {
            opacity: 1;
        }

        /* Responsive optimizations */
        @media (max-width: 1920px) {
            .text h2 {
                font-size: 4.5em;
            }
            .text h3 {
                font-size: 3.5em;
            }
        }

        @media (max-width: 1440px) {
            .text h2 {
                font-size: 4em;
            }
            .text h3 {
                font-size: 3em;
            }
            .showcase header {
                padding: 30px 80px;
            }
            .text {
                margin-left: 80px;
            }
        }

        @media (max-width: 1200px) {
            .text h2 {
                font-size: 3.5em;
            }
            .text h3 {
                font-size: 2.5em;
            }
            .showcase header {
                padding: 30px 60px;
            }
            .text {
                margin-left: 60px;
            }
        }

        @media (max-width: 991px) {
            .showcase,
            .showcase header {
                padding: 40px;
            }
            .text h2 {
                font-size: 3em;
            }
            .text h3 {
                font-size: 2em;
            }
            .text {
                margin-left: 0;
                text-align: center;
                padding: 0 20px;
            }
            .social {
                margin: 0 40px;
            }
            .audio-controls {
                right: 20px;
            }
            .quality-indicator {
                top: 80px;
                right: 15px;
                font-size: 11px;
                padding: 6px 12px;
            }
        }

        @media (max-width: 768px) {
            .showcase header {
                padding: 20px 30px;
            }
            
            .logo {
                font-size: 1.5em;
            }
            
            .text {
                padding: 0 30px;
                max-width: 100%;
            }
            
            .text h2 {
                font-size: 2.5em;
                line-height: 0.9em;
            }
            
            .text h3 {
                font-size: 1.8em;
                line-height: 0.9em;
                margin-bottom: 15px;
            }
            
            .text p {
                font-size: 1em;
                margin: 15px 0;
                line-height: 1.5;
            }
            
            .btn {
                padding: 12px 25px;
                font-size: 0.9em;
                letter-spacing: 1px;
            }
            
            .audio-controls {
                right: 15px;
                gap: 15px;
            }
            
            .audio-btn {
                width: 50px;
                height: 50px;
                font-size: 18px;
            }
            
            .social {
                bottom: 15px;
                margin: 0 30px;
            }
            
            .social li {
                margin: 0 10px;
            }
        }

        @media (max-width: 480px) {
            .showcase header {
                padding: 15px 20px;
            }
            
            .logo {
                font-size: 1.3em;
            }
            
            .text {
                padding: 0 20px;
            }
            
            .text h2 {
                font-size: 2em;
                margin-bottom: 5px;
            }
            
            .text h3 {
                font-size: 1.5em;
                margin-bottom: 10px;
            }
            
            .text p {
                font-size: 0.9em;
                margin: 10px 0;
            }
            
            .btn {
                padding: 10px 20px;
                font-size: 0.8em;
            }
            
            .audio-controls {
                right: 10px;
                gap: 12px;
            }
            
            .audio-btn {
                width: 45px;
                height: 45px;
                font-size: 16px;
            }
            
            .social {
                bottom: 10px;
                margin: 0 20px;
                justify-content: center;
            }
            
            .quality-indicator {
                top: 60px;
                right: 10px;
                font-size: 10px;
                padding: 5px 10px;
            }
        }

        /* Critical rendering path optimizations */
        .showcase * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
    </style>
</head>
<body>
    <!-- Enhanced loading screen with progress -->
    <div class="loading" id="loading">
        <div class="spinner"></div>
        <div class="loading-text" id="loadingText">Loading 4K Experience...</div>
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
    </div>

    <section class="showcase">
        <header>
            <h2 class="logo">On the Road</h2>
        </header>
        
        <!-- Optimized video container with multiple sources -->
        <div class="video-container">
            <div class="video-placeholder" id="videoPlaceholder"></div>
            
            <!-- Primary 4K video with optimized attributes -->
            <video class="video" id="mainVideo" 
                   autoplay 
                   muted 
                   loop 
                   playsinline
                   preload="auto"
                   poster="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1920 1080'><rect width='1920' height='1080' fill='%23000'/></svg>">
                <source src="assets/videoplayback.mp4" type="video/mp4">
                <!-- Fallback for older browsers -->
                <p>Your browser doesn't support HTML5 video. Please upgrade to a modern browser for the best experience.</p>
            </video>
        </div>
        
        <div class="overlay"></div>
        
        <!-- Enhanced quality and buffering indicators -->
        <div class="quality-indicator" id="qualityIndicator">
            Optimizing...
        </div>
        
        <div class="buffering-indicator" id="bufferingIndicator">
            Buffering...
        </div>
        
        <!-- Enhanced audio controls -->
        <div class="audio-controls">
            <button class="audio-btn" id="muteBtn" title="Toggle Sound">
                <i class="fas fa-volume-mute" id="volumeIcon"></i>
            </button>
            <button class="audio-btn" id="playBtn" title="Play/Pause">
                <i class="fas fa-pause" id="playIcon"></i>
            </button>
        </div>
        
        <div class="text">
            <h2>Bugatti Chiron</h2>
            <p>Feel the power in every roar and the elegance in every detail.<br>A journey that speaks to your senses.</p>
            <a href="https://youtu.be/NMThdHhrLoM?si=ZlmqIRu9CFaN1rGA" class="btn">Watch Now</a>
        </div>
        
        <ul class="social">
            <li><a href="https://x.com/Bugatti?ref_src=twsrc%5Egoogle%7Ctwcamp%5Eserp%7Ctwgr%5Eauthor"> <img src="https://img.icons8.com/material-rounded/30/000000/facebook.png" alt="facebook"></a></li>
            <li><a href="https://www.facebook.com/bugatti.dv/"> <img src="https://img.icons8.com/material-rounded/30/000000/twitter.png" alt="twitter"></a></li>
        </ul>
    </section>

    <script>
        // Enhanced video optimization and control system
        class OptimizedVideoPlayer {
            constructor() {
                this.video = document.getElementById('mainVideo');
                this.muteBtn = document.getElementById('muteBtn');
                this.playBtn = document.getElementById('playBtn');
                this.volumeIcon = document.getElementById('volumeIcon');
                this.playIcon = document.getElementById('playIcon');
                this.loading = document.getElementById('loading');
                this.loadingText = document.getElementById('loadingText');
                this.progressFill = document.getElementById('progressFill');
                this.qualityIndicator = document.getElementById('qualityIndicator');
                this.bufferingIndicator = document.getElementById('bufferingIndicator');
                this.videoPlaceholder = document.getElementById('videoPlaceholder');
                
                this.soundEnabled = false;
                this.isLoaded = false;
                this.bufferHealth = 0;
                
                this.initializePlayer();
            }

            initializePlayer() {
                // Force hardware acceleration
                this.video.style.transform = 'translateZ(0)';
                this.video.style.willChange = 'transform, opacity';
                
                // Enhanced video attributes for smooth 4K playback
                this.video.setAttribute('webkit-playsinline', '');
                this.video.setAttribute('x-webkit-airplay', 'allow');
                
                // Preload optimization
                this.video.preload = 'auto';
                this.video.load();
                
                this.setupEventListeners();
                this.startBufferMonitoring();
                this.optimizeForDevice();
            }

            setupEventListeners() {
                // Video loading events
                this.video.addEventListener('loadstart', () => {
                    this.updateLoadingProgress(10);
                    this.loadingText.textContent = 'Initializing 4K stream...';
                });

                this.video.addEventListener('loadedmetadata', () => {
                    this.updateLoadingProgress(30);
                    this.loadingText.textContent = 'Loading video metadata...';
                    this.updateQualityIndicator();
                });

                this.video.addEventListener('loadeddata', () => {
                    this.updateLoadingProgress(50);
                    this.loadingText.textContent = 'Preparing video data...';
                });

                this.video.addEventListener('canplay', () => {
                    this.updateLoadingProgress(70);
                    this.loadingText.textContent = 'Optimizing playback...';
                });

                this.video.addEventListener('canplaythrough', () => {
                    this.updateLoadingProgress(90);
                    this.loadingText.textContent = 'Ready to play!';
                    setTimeout(() => this.finishLoading(), 500);
                });

                // Playback events
                this.video.addEventListener('playing', () => {
                    this.playIcon.className = 'fas fa-pause';
                    this.bufferingIndicator.classList.remove('visible');
                });

                this.video.addEventListener('pause', () => {
                    this.playIcon.className = 'fas fa-play';
                });

                this.video.addEventListener('waiting', () => {
                    this.bufferingIndicator.classList.add('visible');
                });

                // Buffer monitoring
                this.video.addEventListener('progress', () => {
                    this.updateBufferHealth();
                });

                // Error handling
                this.video.addEventListener('error', (e) => {
                    console.error('Video error:', e);
                    this.handleVideoError();
                });

                // Control buttons
                this.muteBtn.addEventListener('click', () => this.toggleMute());
                this.playBtn.addEventListener('click', () => this.togglePlay());

                // User interaction for audio
                this.setupAudioActivation();

                // Performance monitoring
                this.setupPerformanceMonitoring();
            }

            updateLoadingProgress(percentage) {
                this.progressFill.style.width = percentage + '%';
            }

            finishLoading() {
                this.updateLoadingProgress(100);
                setTimeout(() => {
                    this.loading.classList.add('hidden');
                    this.videoPlaceholder.classList.add('hidden');
                    this.isLoaded = true;
                    this.startVideo();
                }, 300);
            }

            startVideo() {
                const playPromise = this.video.play();
                
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        console.log('4K video started successfully');
                        this.optimizePlayback();
                    }).catch(error => {
                        console.log('Auto-play prevented:', error);
                        this.showPlayPrompt();
                    });
                }
            }

            optimizePlayback() {
                // Set optimal playback settings for 4K
                this.video.playbackRate = 1.0;
                
                // Enable hardware decoding hints
                if (this.video.requestVideoFrameCallback) {
                    this.video.requestVideoFrameCallback(() => {
                        // Frame callback for sync
                    });
                }
            }

            optimizeForDevice() {
                // Detect device capabilities and adjust accordingly
                const canvas = document.createElement('canvas');
                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                
                if (gl) {
                    // GPU acceleration available
                    this.video.style.filter = 'brightness(1)';
                    console.log('GPU acceleration enabled');
                } else {
                    // Fallback for devices without GPU support
                    console.log('Using CPU rendering');
                }

                // Adjust based on screen size and pixel density
                const pixelRatio = window.devicePixelRatio || 1;
                const screenWidth = window.screen.width * pixelRatio;
                
                if (screenWidth >= 3840) {
                    this.qualityIndicator.textContent = '4K Ultra HD Ready';
                } else if (screenWidth >= 1920) {
                    this.qualityIndicator.textContent = '4K Optimized for Display';
                } else {
                    this.qualityIndicator.textContent = '4K Scaled to Fit';
                }
            }

            updateQualityIndicator() {
                const width = this.video.videoWidth;
                const height = this.video.videoHeight;
                
                if (width >= 3840 && height >= 2160) {
                    this.qualityIndicator.textContent = '4K Ultra HD (3840×2160)';
                    this.qualityIndicator.style.background = 'rgba(0,150,0,0.8)';
                } else if (width >= 1920 && height >= 1080) {
                    this.qualityIndicator.textContent = 'Full HD (1920×1080)';
                    this.qualityIndicator.style.background = 'rgba(255,150,0,0.8)';
                } else {
                    this.qualityIndicator.textContent = `${width}×${height}`;
                    this.qualityIndicator.style.background = 'rgba(150,150,150,0.8)';
                }
            }

            updateBufferHealth() {
                if (this.video.buffered.length > 0) {
                    const bufferedEnd = this.video.buffered.end(this.video.buffered.length - 1);
                    const currentTime = this.video.currentTime;
                    this.bufferHealth = bufferedEnd - currentTime;
                    
                    if (this.bufferHealth < 5) {
                        this.bufferingIndicator.textContent = 'Low Buffer';
                        this.bufferingIndicator.style.background = 'rgba(255,100,0,0.8)';
                    } else {
                        this.bufferingIndicator.textContent = `Buffer: ${Math.round(this.bufferHealth)}s`;
                        this.bufferingIndicator.style.background = 'rgba(0,150,0,0.8)';
                    }
                }
            }

            startBufferMonitoring() {
                setInterval(() => {
                    this.updateBufferHealth();
                }, 1000);
            }

            setupAudioActivation() {
                const enableAudio = () => {
                    if (!this.soundEnabled) {
                        this.video.muted = false;
                        this.volumeIcon.className = 'fas fa-volume-up';
                        this.soundEnabled = true;
                        this.muteBtn.title = 'Mute Sound';
                        console.log('Audio enabled on user interaction');
                    }
                };

                // Multiple interaction types for audio activation
                ['click', 'touchstart', 'keydown'].forEach(event => {
                    document.addEventListener(event, enableAudio, { once: true });
                });
            }

            setupPerformanceMonitoring() {
                // Monitor frame drops and performance
                let frameCount = 0;
                let lastTime = performance.now();

                const monitorPerformance = () => {
                    const currentTime = performance.now();
                    const deltaTime = currentTime - lastTime;
                    frameCount++;

                    if (deltaTime >= 1000) {
                        const fps = Math.round((frameCount * 1000) / deltaTime);
                        
                        if (fps < 24) {
                            console.warn('Low FPS detected:', fps);
                            this.optimizeForLowPerformance();
                        }

                        frameCount = 0;
                        lastTime = currentTime;
                    }

                    requestAnimationFrame(monitorPerformance);
                };

                requestAnimationFrame(monitorPerformance);
            }

            optimizeForLowPerformance() {
                // Reduce visual effects for better performance
                const overlay = document.querySelector('.overlay');
                if (overlay) {
                    overlay.style.mixBlendMode = 'normal';
                }
                
                console.log('Performance optimization applied');
            }

            toggleMute() {
                if (this.video.muted) {
                    this.video.muted = false;
                    this.volumeIcon.className = 'fas fa-volume-up';
                    this.muteBtn.title = 'Mute Sound';
                } else {
                    this.video.muted = true;
                    this.volumeIcon.className = 'fas fa-volume-mute';
                    this.muteBtn.title = 'Unmute Sound';
                }
            }

            togglePlay() {
                if (this.video.paused) {
                    this.video.play();
                    this.playIcon.className = 'fas fa-pause';
                    this.playBtn.title = 'Pause';
                } else {
                    this.video.pause();
                    this.playIcon.className = 'fas fa-play';
                    this.playBtn.title = 'Play';
                }
            }

            showPlayPrompt() {
                const playPrompt = document.createElement('div');
                playPrompt.innerHTML = `
                    <div style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
                               background: rgba(0,0,0,0.9); display: flex; justify-content: center; 
                               align-items: center; z-index: 10000; cursor: pointer; backdrop-filter: blur(10px);">
                        <div style="text-align: center; color: white; transform: translateZ(0);">
                            <div style="font-size: 4em; margin-bottom: 20px; animation: pulse 2s infinite;">▶️</div>
                            <h2 style="font-size: 2.5em; margin-bottom: 15px; font-weight: 700;">Click to Experience 4K</h2>
                            <p style="font-size: 1.3em; opacity: 0.8;">Ultimate cinematic journey awaits</p>
                        </div>
                    </div>
                `;
                document.body.appendChild(playPrompt);
                
                playPrompt.addEventListener('click', () => {
                    this.video.play();
                    this.video.muted = false;
                    this.volumeIcon.className = 'fas fa-volume-up';
                    this.soundEnabled = true;
                    playPrompt.remove();
                });
            }

            handleVideoError() {
                this.qualityIndicator.textContent = 'Video Loading Error';
                this.qualityIndicator.style.background = 'rgba(255,0,0,0.8)';
                this.loadingText.textContent = 'Error loading video. Please refresh.';
                
                // Try to recover
                setTimeout(() => {
                    this.video.load();
                }, 2000);
            }
        }

        // Initialize the optimized video player
        let videoPlayer;

        // Enhanced page load optimization
        window.addEventListener('DOMContentLoaded', () => {
            // Preload critical resources
            const link = document.createElement('link');
            link.rel = 'preload';
            link.href = 'assets/videoplayback.mp4';
            link.as = 'video';
            link.type = 'video/mp4';
            document.head.appendChild(link);
        });

        window.addEventListener('load', () => {
            // Initialize video player with delay for better UX
            setTimeout(() => {
                videoPlayer = new OptimizedVideoPlayer();
            }, 100);
        });

        // Handle visibility changes for performance
        document.addEventListener('visibilitychange', () => {
            if (videoPlayer && videoPlayer.video) {
                if (document.hidden) {
                    videoPlayer.video.pause();
                } else {
                    if (videoPlayer.isLoaded) {
                        videoPlayer.video.play();
                    }
                }
            }
        });

        // Memory cleanup on page unload
        window.addEventListener('beforeunload', () => {
            if (videoPlayer && videoPlayer.video) {
                videoPlayer.video.pause();
                videoPlayer.video.src = '';
                videoPlayer.video.load();
            }
        });

        // Add CSS animation for play prompt
        const style = document.createElement('style');
        style.textContent = `
            @keyframes pulse {
                0% { transform: scale(1); opacity: 1; }
                50% { transform: scale(1.1); opacity: 0.8; }
                100% { transform: scale(1); opacity: 1; }
            }
        `;
        document.head.appendChild(style);

        // Optimize for different connection speeds
        if ('connection' in navigator) {
            const connection = navigator.connection;
            if (connection.effectiveType === 'slow-2g' || connection.effectiveType === '2g') {
                console.log('Slow connection detected, applying optimizations');
                // Could implement lower quality fallback here
            }
        }

        // Service Worker for caching (if supported)
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').then(() => {
                console.log('Service Worker registered for video caching');
            }).catch(err => {
                console.log('Service Worker registration failed');
            });
        }
    </script>
</body>
</html>